{% set entryQuery = craft.entries()
.section('navigation')%}
{% set entries = entryQuery.all() %}

<!--create arrays-->
{%set navItems = []%}


<!--{# get entries #}-->
{%for entry in entries%}
    {%set items = []%}
    {%set mainItem = entry.mainItem.first() ?? null %}
    {%set childItems = entry.childItem.all() ?? null %}

    <!--merge child items to main items into an array and then add to a single array-->
    <!--[1 mainItem [x ChildItem]]-->

    {%set items = items|merge({'main':mainItem})%}
    {%set items = items|merge({'children':childItems})%}

    {%set navItems = navItems|merge([items])%}
{%endfor%}



<div class = "row ">
<div class="col-md-2 navbar navbar-expand-md navbar-dark  nav-spacer"></div>
<nav class="navbar navbar-expand-md navbar-dark  col-md-8">

    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarDD" aria-controls="navbarDD" aria-expanded="false" aria-label="Navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="row  navbar-collapse text-center" id="navbarDD ">





            <!--Output main items-->
            {%for navItem in navItems%}
            <div class="col-md-1 mainNavItem">

                <!--if no child items-->
                {%if navItem['children'][0] is not defined%}
                    {%set url = ""%}
                    {%if navItem['main'].itemEntry|length%}
                        {%set url = navItem['main'].itemEntry.first().url%}
                    {%endif%}
                    <a href="{{url}}">{{navItem['main'].itemTitle}}</a>
                    {%else%}
                    <!--if child items-->
                    <a href="" class="{{navItem['main'].itemTitle}}--parent" >{{navItem['main'].itemTitle}}</a>
                {%endif%}
            </div>
            {%endfor%}








    </div>
</nav>
<div class="col-md-2 navbar navbar-expand-md navbar-dark nav-spacer"></div>
</div>
<!--Output Child items-->
{%for navItem in navItems%}
{%if navItem['children'][0] is defined%}
<div class="row childrenNavRow {{navItem['main'].itemTitle}}--child">


    <!--loop through children-->
    {%for child in navItem['children']%}

        <div class="row childNavRow">
            <div class="col-md-6 childNavDetails">

            </div>
            <div class="col-md-6 childNavLink">

            </div>
        </div>
    {%endfor%}


</div>
{%endif%}
{%endfor%}